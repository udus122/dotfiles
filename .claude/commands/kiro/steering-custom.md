---
description: 特定のプロジェクトコンテキスト用のカスタムKiroステアリングドキュメントを作成
allowed-tools: Bash, Read, Write, Edit, MultiEdit, Glob, Grep, LS
---

# Kiroカスタムステアリング作成

3つの基礎ファイル（product.md、tech.md、structure.md）を超えた特別なコンテキスト用のカスタムステアリングドキュメントを`.kiro/steering/`に作成します。

## 現在のステアリングステータス

### 既存のステアリングドキュメント
- コアステアリングファイル: !`ls -la .kiro/steering/*.md 2>/dev/null || echo "ステアリングディレクトリが見つかりません"`
- カスタムステアリング数: !`if [ -d ".kiro/steering" ]; then count=0; for f in .kiro/steering/*.md; do if [ -f "$f" ] && [ "$f" != ".kiro/steering/product.md" ] && [ "$f" != ".kiro/steering/tech.md" ] && [ "$f" != ".kiro/steering/structure.md" ]; then count=$((count + 1)); fi; done; echo "$count"; else echo "0"; fi`

### プロジェクト分析
- 専門領域: !`find . -path ./node_modules -prune -o -path ./.git -prune -o -type d \( -name "test*" -o -name "spec*" -o -name "api" -o -name "auth" -o -name "security" \) -print 2>/dev/null || echo "専門ディレクトリが見つかりません"`
- 設定パターン: !`find . -path ./node_modules -prune -o \( -name "*.config.*" -o -name "*rc.*" -o -name ".*rc" \) -print 2>/dev/null || echo "設定ファイルが見つかりません"`

## タスク: カスタムステアリングドキュメントの作成

ユーザーの要件に基づいて新しいカスタムステアリングドキュメントを作成します。一般的なユースケースは以下の通り:

### 一般的なカスタムステアリングタイプ

1. API標準 (`api-standards.md`)
   - REST/GraphQLコンベンション
   - エラーハンドリングパターン
   - 認証/認可アプローチ
   - レート制限とページネーション
   - APIバージョニング戦略

2. テストアプローチ (`testing.md`)
   - テストファイルの組織
   - テストの命名規則
   - モック戦略
   - カバレッジ要件
   - E2E vs ユニット vs 統合テスト

3. コードスタイルガイドライン (`code-style.md`)
   - 言語固有のコンベンション
   - リンターを超えたフォーマットルール
   - コメント標準
   - 関数/変数の命名パターン
   - コード組織の原則

4. セキュリティポリシー (`security.md`)
   - 入力検証要件
   - 認証パターン
   - シークレット管理
   - OWASPコンプライアンスガイドライン
   - セキュリティレビューチェックリスト

5. データベースコンベンション (`database.md`)
   - スキーマ設計パターン
   - マイグレーション戦略
   - クエリ最適化ガイドライン
   - コネクションプーリング設定
   - バックアップとリカバリー手順

6. パフォーマンス標準 (`performance.md`)
   - ロード時間要件
   - メモリ使用量制限
   - 最適化技術
   - キャッシング戦略
   - モニタリングとプロファイリング

7. デプロイメントワークフロー (`deployment.md`)
   - CI/CDパイプラインステージ
   - 環境設定
   - リリース手順
   - ロールバック戦略
   - ヘルスチェック要件

## インクルージョンモードの選択

このステアリングドキュメントが参照される頻度とコンテキストに基づいてインクルージョンモードを選択:

### 1. 常に含める（カスタムファイルには慎重に使用）
- 使用時: すべてのコードに適用されるユニバーサル標準（セキュリティポリシー、コアコンベンション）
- 影響: すべてのインタラクションでコンテキストサイズが増加
- 例: 重要なセキュリティ要件用の`security-standards.md`
- 推奨: 本当にユニバーサルなガイドラインにのみ使用

### 2. 条件付きインクルージョン（ほとんどのカスタムファイルに推奨）  
- 使用時: 特定のファイルタイプまたはディレクトリ用のドメイン固有ガイドライン
- ファイルパターン: `"*.test.js"`, `"src/api/**/*"`, `"**/auth/*"`, `"*.config.*"`
- 例: テストファイル編集時のみロードされる`testing-approach.md`
- メリット: 一般的なインタラクションを圧倒することなく関連コンテキストを提供

### 3. 手動インクルージョン（特定コンテキストに最適）
- 使用時: 時々必要とされる専門知識 
- 使用方法: 特定の会話中に`@filename.md`で参照
- 例: デプロイメント固有タスク用の`deployment-runbook.md`
- メリット: 必要な時に利用可能、日常的なインタラクションを散らかさない

## ドキュメント構造ガイドライン

カスタムステアリングドキュメントを以下の構成で作成:

1. 明確なタイトルと目的
   - このドキュメントがカバーするプロジェクトの側面
   - このガイダンスを適用すべきタイミング

2. 具体的なガイドライン
   - 従うべき具体的なルールとパターン
   - 重要な決定の根拠

3. コード例
   - 正しい実装パターンを示す
   - 役立つ場合は反例も含める

4. 統合ポイント
   - 他のステアリングドキュメントとの関係
   - 依存関係または前提条件

## セキュリティと品質のガイドライン

### セキュリティ要件
- 機密データを含めない: APIキー、パスワード、データベースURL、シークレットは含めない
- 機密コンテキストをレビュー: 内部サーバー名、プライベートAPIエンドポイントを避ける
- チームアクセスの認識: すべてのステアリングコンテンツはチームメンバーと共有される

### コンテンツ品質標準
- 単一責任: 1つのステアリングファイル = 1つのドメイン（APIとデータベースのガイドラインを混在させない）
- 具体的な例: コードスニペットと実際のプロジェクト例を含める  
- 明確な根拠: 特定のアプローチが好まれる理由を説明
- 管理可能なサイズ: ファイルあたり2～3分の読み取り時間を目指す

## 指示事項

1. ユーザーに以下を聞く:
   - ドキュメント名（.mdで終わる説明的なファイル名）
   - カスタムステアリングのトピック/目的
   - インクルージョンモードの好み
   - 条件付きインクルージョン用の特定パターン（該当する場合）

2. `.kiro/steering/`に以下の内容でドキュメントを作成:
   - 明確で焦点を絞ったコンテンツ（2～3分で読める）
   - 実用的な例
   - 他のステアリングファイルと一貫したフォーマット

3. トップにコメントを追加してインクルージョンモードを文書化:
   ```markdown
   <!-- Inclusion Mode: Always | Conditional: "pattern" | Manual -->
   ```

4. ドキュメントが以下であることを検証:
   - 既存のステアリングコンテンツを重複していない
   - 指定されたコンテキストにユニークな価値を提供
   - マークダウンのベストプラクティスに従う

覚えておくこと: カスタムステアリングドキュメントは、3つの基礎ファイルを置き換えるのではなく補完するものです。プロジェクトの特定の側面に専門的なコンテキストを提供します。
ultrathink
