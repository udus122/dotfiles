# RDRA

[RDRA](https://www.rdra.jp)とは何かを説明する資料です。
RDRAはRelationship Driven Requirement Analysisの略で、神崎善司さんが考案した要件定義のためのフレームワークです。
[RDRA3.0ハンドブック](https://amzn.asia/d/55fzx52)に基づいて書かれています。

## RDRAが解決する課題

RDRAは関係者(ステークホルダー)間のコミュニケーション不足や認識違いに起因する問題を解決するための要件定義手法です。

解決する主な課題は次の3つです。

- コミュニケーションの課題
- 根拠不明で曖昧な要件
- ユーザー視点の欠如

RDRAは上記の要件定義における問題点を解決するために次の2つの特徴を持っています。

- 「要件として何を定義すべきか」を明確にする点
- 要件を構成する要素間の関係性(Relationship)に着目し、それらを整理・可視化する点

この2つの特徴により、何を定義すべきか、要素間の依存関係が明確になります。
RDRAではシステム内部のことだけでなく、システムを取り巻く外部環境まで記述する
「システム化によって得られる価値と利用環境をまず明らかにし、次にシステムとの接点を具体化し、最後にそれらを実現するシステム本体を定義する」
システムの具体的な仕様を決定する間に、その前提として目的や背景まで明確化しておおくことで、全ての機能にたいして理由を伴った要件定義が可能になる

RDRAは関係者（ステークホルダー）間のコミュニケーション不足や認識齟齬に起因する問題を解決するための要件定義手法です。

## 解決する主な課題

1. コミュニケーションの課題 - 関係者間で要件の理解が異なる
2. 根拠不明で曖昧な要件 - なぜその機能が必要なのか説明できない
3. ユーザー視点の欠如 - 実際の利用シーンが考慮されていない

## RDRAの2つ特徴

### 1. 要件定義の構成要素を体系化

「要件として何を定義すべきか」を明確に規定します。システムの価値、外部環境、利用者、業務、機能など、定義すべき要素をあらかじめ特定することで、検討漏れを防ぎます。

### 2. 要素間の関係性（Relationship）を可視化

各要素がどのように関連し、依存しているかを図示します。これにより：
- ある要件変更が他にどう影響するかが一目で分かる
- 各機能がなぜ必要なのか、その根拠を辿れる
- 矛盾や不整合を早期に発見できる

## RDRAのアプローチ

RDRAは「外から内へ」の視点で要件を定義します：

1. 価値と環境 - まずシステム化で実現したい価値と、それを取り巻く外部環境を明確化
2. システムとの接点 - 次に利用者や外部システムとのやり取りを具体化
3. システム本体 - 最後に上記を実現するための内部機能を定義

このアプローチにより、すべての機能が「なぜ必要か」という根拠と紐づいた、ブレのない要件定義が可能になります。

## RDRAの基本構造

### 4つのレイヤー構造

RDRAは要件定義全体を4つのレイヤーで表現し、下位のレイヤーは上位のレイヤーに依存します。
上位のレイヤーは下位のレイヤーの根拠(Why)になります。例えば、システム価値を根拠にシステム外部環境を定義するといった流れです。

- システム価値: システム化の価値
- システム外部環境: システムの使われ方を示す
- システム境界: システムの入出力を明らかにする
- システム: システムで管理する情報、状態、ビジネスルール

各レイヤー内にRDRA用の要素(アイコン)を配置することで、要素間の依存関係も明確になります。

## RDRAのレイヤー構造とアイコンの対応関係

RDRAは4つのレイヤー構造と14の基本モデル(アイコン)の対応関係を示します。

- システム価値レイヤー
  - アクター: システムを利用する人や組織の役割
  - 外部システム: 連携が必要な既存システムや外部サービス
  - 要求(機能要求・非機能要求): システムが何を実現すべきか
  - システム化の目的・提供価値: 「これができなければ意味がない」という最上位の判断基準
- システム外部環境レイヤー
  - 業務: 販売管理や在庫管理などのようなビジネスの最上位のまとまり
  - BUC(ビジネスユースケース): 業務フローの単位
  - アクティビティ: 人やシステムが行う仕事の単位
- システム境界レイヤー
  - UC(ユースケース): システムが提供する具体的な機能単位
  - 画面: ユーザーインターフェース(画面や帳票、Excel出力)
  - イベント: 外部のシステムとのインターフェース
  - タイマー: ビジネス上の締め切りや実行タイミング
- システム
  - 情報: システムが扱う概念的なデータとその関係
  - 状態: 業務上管理すべき対象の状態遷移
  - 条件: 業務上またはシステム上のビジネスルール
  - バリエーション: ビジネス上認識している区分や種別

### システム価値レイヤー

システムが実現すべき価値に着目する最上位のレイヤー。
「このシステムは誰にとって、どのような価値を提供するのか」を明らかにします。

#### アクター

システムに関与する役割(価値を得る/与える)を定義する
※アクター名は役割名を生j通史、一人が複数の役割を兼任する場合は、それぞれ別のアクターとして定義する

#### 外部システム

価値を与える/得る、外部のシステムを役割名で定義する(例: 通信販売システム)
※システムが目的達成の手段として利用するだけの外部サービス(例: Google Mapsによる地図表示機能)は、ここでの外部システムに該当しない

#### 要求

要件を組み立てるための方向性を示す、最重要な要求を定義する。
機能要求、非機能要求に分かれる

#### システム化の目的・提供価値

システム化プロジェクトの最上位の目的を一言で定義する要素です。

役割: 「これができなければ投資する意味がない」という本質的な目的を明文化
すべての意思決定の判断基準として機能

作成のポイント:
- 要求分析から最重要な要求を抽出して簡潔にまとめる
- アクターや外部システムへの提供価値を起点に考える
- いつでも立ち返れるよう、一言で表現する

効果:
- 目的が明確になることで意思決定が迅速化
- プロジェクト全体の方向性がブレなくなる

必ずしもプロジェクト開始時に確定させる必要はなく、要求分析を進めながら精緻化していくことも可能

※RDRA3.0には登場しないが、RDRA2.0から引用している。このアイコンが最上位に位置づけられると考えたため

### システム外部環境

システムがどのように使われるかを表すレイヤー。
「誰が何の業務を行い、その結果どんな価値を提供するか」を業務フローとして示します。

#### 業務

システムの対象となる大きな業務単位(例: 販売管理、在庫管理)
大企業でも中小企業でも業務という意味では変わらない。
目安として、大規模システムでは10個程度、小規模システムでは2個程度になる。
業務の規模は、その業務を構成するBUCの数によって決まる

#### BUC(ビジネスユースケース)

業務を構成する業務フローの単位であり、利用者に対して価値を実現する単位。
通常、価値を得るアクターがいて、それを支えるアクターで構成される。
同じ業務でもアクターや外部システムの違いで業務フローが異なるので、同じ業務でもBUCが複数に分かれる

#### アクティビティ

業務フロー内の個々の仕事
RDRAの構造上、人が行うこともシステムが行うこともアクティブティとして、仕事を明示する。
※バッチのようなシステムだけで行っていることでも、その処理が行っていることを仕事として明確にする

### システム境界

ユーザーや他のバイブシステムがシステムとどう関わるを示すレイヤー。
システムとの境界、つまりシステムとのインターフェースを明確にします。

#### UC(ユースケース)

システムが提供する具体的な機能(名称: 「XXXをYYYする」)
システムを使った人まとまりの仕事の単位を定義する
どのアクターがどのタイミングでシステムを使い、何を達成するかを表現する

#### 画面

システム(UC)とアクターをつなぐインターフェースとなる
帳票やExcel出力、スマホも含む

#### イベント

システム(UC)と外部システムが連携するインターフェースとなる
UCが通信ツールを使ってアクターに通知する場合もイベントを使う

#### タイマー: 時間の区切り

ビジネス上の締め切り(例: 月末締め、定時起動)
※システム都合(日時バッチなど)は除外

### システム

システム内部のレイヤーで、システム化する情報とその情報が取り得る状態を定義し、更にシステムが満たすべきビジネスルール(条件やバリエーション)を表現する。
システム全体の要として、定義された各要素感に矛盾が生じないよう、整合性を維持する重要な役割を担う。

#### 情報

ビジネス遂行に必要な概念的なデータを表す
ユニークなID(受注番号、請求書番号など)を持ち、一位に識別できる
表現の粒度:
例えば、「受注」と「受注明細」のように親子関係にある情報の場合、まずは親にあたる「受注」のみを情報もでるとして定義する。これは、ビジネス上管理されるべきユニークなIDを持つ主要な情報を迅速に特定するためであり、詳細な明細レベルの情報は次の工程で仕様として明らかにする。

#### 状態モデル/状態

状態モデルは複数の状態と遷移をまとめた単位になる
※情報と状態モデルは必ずしも1対1対応するわけではない

状態モデル: 複数の状態と、それらの間の遷移をまとめて定義する単位
通常システムが管理するユニークなIDは状態を持つので、その状態遷移をまとめた谷が状態モデルになる。
ユニークなIDは情報として管理されるので、情報が持つユニークなIDと状態モデルの湯-肉なIDは同じことが多い。複数のIDから1つの状態モデルを表すこともある。

状態: 特定の状態モデルにおいて、情報が取り得る具体的な状況(例: 「受注済み」「出荷準備中」)

#### 条件

現場で認識されているビジネスルール
消費税のように計算式に名前をつけたものと、マトリクス形式のものに分かれる
マトリクス形式の場合は縦軸と横軸に状態モデルやバリエーションを当てはめると、条件が柔軟になる

#### バリエーション

ビジネスの様々な側面に対応できるように、区分や種別などを表す(例: キャンペーン種別、会員種別など)
区分や種別の個々の値を変えることで振る舞いやルールを変えるために利用する
※システムの設計上現れるフラグなどは対象にしない

### グループ化モデル

上記のモデル(アイコン)をグループ化するための特別なモデルも存在する

#### アクター群

同じ役割を持つアクターをまとめる(組織などが該当)
大規模システムにおいて多数のアクターが存在する場合、関連するアクターをグループ(アクター群)化することで、業務やBUCとの関わりをより俯瞰的に把握することができる

#### 外部システム群

同じ役割を持つ外部システムをまとめる(業界などが該当)
大規模なシステムで多くの外部システムが必要な場合に、外部システムをグループ化しわかりやすくする
病夢・BUCとの関わりなどを俯瞰した視点で見ることができる

#### コンテキスト

- 同じ役割を持つ情報、状態、条件、バリエーションをまとめる
- 「システム」レイヤーの要素に対応する
- システムの特定の領域(ドメイン)における情報、状態、条件、バリエーションをまとめて管理する単位として利用できる
- コンテキストはシステムの中核として全UCの整合性や一貫性を確保する
- システムの大きな分類をコンテキストとして扱い、業務やBUCとシステムの関係を俯瞰して把握することができる
